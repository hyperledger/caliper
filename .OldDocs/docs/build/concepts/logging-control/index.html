<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../runtime-config/ rel=prev><link href=../benchmark-generators/ rel=next><link rel=icon href=../../_static/caliper.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.28"><title>Logging Control - Hyperledger Caliper</title><link rel=stylesheet href=../../assets/stylesheets/main.6543a935.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config",""),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Hyperledger Caliper" class="md-header__button md-logo" aria-label="Hyperledger Caliper" data-md-component=logo> <img src=../../_static/caliper.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Hyperledger Caliper </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Logging Control </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hyperledger-caliper/caliper title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> hyperledger/caliper </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Getting Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../bench-config/ class=md-tabs__link> Concepts </a> </li> <li class=md-tabs__item> <a href=../../connectors/fabric-config/ class=md-tabs__link> Connectors </a> </li> <li class=md-tabs__item> <a href=../../tutorial/ class=md-tabs__link> Tutorials </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Hyperledger Caliper" class="md-nav__button md-logo" aria-label="Hyperledger Caliper" data-md-component=logo> <img src=../../_static/caliper.svg alt=logo> </a> Hyperledger Caliper </label> <div class=md-nav__source> <a href=https://github.com/hyperledger-caliper/caliper title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> hyperledger/caliper </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../.. class="md-nav__link "> <span class=md-ellipsis> Getting Started </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/installing-caliper/ class=md-nav__link> <span class=md-ellipsis> Installing and Running Caliper </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../bench-config/ class=md-nav__link> <span class=md-ellipsis> Benchmark Configuration </span> </a> </li> <li class=md-nav__item> <a href=../workload-module/ class=md-nav__link> <span class=md-ellipsis> Workload Configuration </span> </a> </li> <li class=md-nav__item> <a href=../rate-controllers/ class=md-nav__link> <span class=md-ellipsis> Rate Controllers </span> </a> </li> <li class=md-nav__item> <a href=../caliper-monitors/ class=md-nav__link> <span class=md-ellipsis> Resource and Transaction Monitors </span> </a> </li> <li class=md-nav__item> <a href=../caliper-messengers/ class=md-nav__link> <span class=md-ellipsis> Messengers </span> </a> </li> <li class=md-nav__item> <a href=../runtime-config/ class=md-nav__link> <span class=md-ellipsis> Runtime Configuration </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Logging Control </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Logging Control </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#customizing-the-logging-style class=md-nav__link> <span class=md-ellipsis> Customizing the logging style </span> </a> <nav class=md-nav aria-label="Customizing the logging style"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#setting-the-message-structure class=md-nav__link> <span class=md-ellipsis> Setting the message structure </span> </a> </li> <li class=md-nav__item> <a href=#applying-formats class=md-nav__link> <span class=md-ellipsis> Applying formats </span> </a> <nav class=md-nav aria-label="Applying formats"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#timestamp class=md-nav__link> <span class=md-ellipsis> Timestamp </span> </a> </li> <li class=md-nav__item> <a href=#label class=md-nav__link> <span class=md-ellipsis> Label </span> </a> </li> <li class=md-nav__item> <a href=#json class=md-nav__link> <span class=md-ellipsis> JSON </span> </a> </li> <li class=md-nav__item> <a href=#padding class=md-nav__link> <span class=md-ellipsis> Padding </span> </a> </li> <li class=md-nav__item> <a href=#align class=md-nav__link> <span class=md-ellipsis> Align </span> </a> </li> <li class=md-nav__item> <a href=#attribute-format class=md-nav__link> <span class=md-ellipsis> Attribute format </span> </a> </li> <li class=md-nav__item> <a href=#colorize class=md-nav__link> <span class=md-ellipsis> Colorize </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuring-logging-targets class=md-nav__link> <span class=md-ellipsis> Configuring logging targets </span> </a> <nav class=md-nav aria-label="Configuring logging targets"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#disabling-loggers class=md-nav__link> <span class=md-ellipsis> Disabling loggers </span> </a> </li> <li class=md-nav__item> <a href=#overriding-logger-target-settings class=md-nav__link> <span class=md-ellipsis> Overriding logger target settings </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#creating-your-own-loggers class=md-nav__link> <span class=md-ellipsis> Creating your own loggers </span> </a> </li> <li class=md-nav__item> <a href=#tips-tricks class=md-nav__link> <span class=md-ellipsis> Tips &amp; tricks </span> </a> <nav class=md-nav aria-label="Tips & tricks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-format-pipeline class=md-nav__link> <span class=md-ellipsis> The format pipeline </span> </a> <nav class=md-nav aria-label="The format pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#assumptions class=md-nav__link> <span class=md-ellipsis> Assumptions </span> </a> </li> <li class=md-nav__item> <a href=#the-life-of-a-log class=md-nav__link> <span class=md-ellipsis> The life of a LOG </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#use-a-configuration-file class=md-nav__link> <span class=md-ellipsis> Use a configuration file </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../benchmark-generators/ class=md-nav__link> <span class=md-ellipsis> Benchmark Generators </span> </a> </li> <li class=md-nav__item> <a href=../declarative-workload-module/ class=md-nav__link> <span class=md-ellipsis> Declarative Workloads </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Connectors </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Connectors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../connectors/fabric-config/ class=md-nav__link> <span class=md-ellipsis> Fabric </span> </a> </li> <li class=md-nav__item> <a href=../../connectors/ethereum-config/ class=md-nav__link> <span class=md-ellipsis> Ethereum </span> </a> </li> <li class=md-nav__item> <a href=../../connectors/writing-connectors/ class=md-nav__link> <span class=md-ellipsis> Writing Connectors </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../tutorial/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorial/fabric/ class=md-nav__link> <span class=md-ellipsis> Basic Fabric Tutorial </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#customizing-the-logging-style class=md-nav__link> <span class=md-ellipsis> Customizing the logging style </span> </a> <nav class=md-nav aria-label="Customizing the logging style"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#setting-the-message-structure class=md-nav__link> <span class=md-ellipsis> Setting the message structure </span> </a> </li> <li class=md-nav__item> <a href=#applying-formats class=md-nav__link> <span class=md-ellipsis> Applying formats </span> </a> <nav class=md-nav aria-label="Applying formats"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#timestamp class=md-nav__link> <span class=md-ellipsis> Timestamp </span> </a> </li> <li class=md-nav__item> <a href=#label class=md-nav__link> <span class=md-ellipsis> Label </span> </a> </li> <li class=md-nav__item> <a href=#json class=md-nav__link> <span class=md-ellipsis> JSON </span> </a> </li> <li class=md-nav__item> <a href=#padding class=md-nav__link> <span class=md-ellipsis> Padding </span> </a> </li> <li class=md-nav__item> <a href=#align class=md-nav__link> <span class=md-ellipsis> Align </span> </a> </li> <li class=md-nav__item> <a href=#attribute-format class=md-nav__link> <span class=md-ellipsis> Attribute format </span> </a> </li> <li class=md-nav__item> <a href=#colorize class=md-nav__link> <span class=md-ellipsis> Colorize </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuring-logging-targets class=md-nav__link> <span class=md-ellipsis> Configuring logging targets </span> </a> <nav class=md-nav aria-label="Configuring logging targets"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#disabling-loggers class=md-nav__link> <span class=md-ellipsis> Disabling loggers </span> </a> </li> <li class=md-nav__item> <a href=#overriding-logger-target-settings class=md-nav__link> <span class=md-ellipsis> Overriding logger target settings </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#creating-your-own-loggers class=md-nav__link> <span class=md-ellipsis> Creating your own loggers </span> </a> </li> <li class=md-nav__item> <a href=#tips-tricks class=md-nav__link> <span class=md-ellipsis> Tips &amp; tricks </span> </a> <nav class=md-nav aria-label="Tips & tricks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#the-format-pipeline class=md-nav__link> <span class=md-ellipsis> The format pipeline </span> </a> <nav class=md-nav aria-label="The format pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#assumptions class=md-nav__link> <span class=md-ellipsis> Assumptions </span> </a> </li> <li class=md-nav__item> <a href=#the-life-of-a-log class=md-nav__link> <span class=md-ellipsis> The life of a LOG </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#use-a-configuration-file class=md-nav__link> <span class=md-ellipsis> Use a configuration file </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Logging Control</h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>Caliper builds on the <a href=https://github.com/winstonjs/winston>winston</a> logger module to provide a flexible, multi-target logging mechanism. There are three different aspects when it comes to interacting with the Caliper logging subsystem:</p> <ol> <li>Customizing the logging style</li> <li>Configuring logging targets</li> <li>Creating your own loggers</li> </ol> <p>The first two points can be achieved through the <a href=../runtime-config/ >runtime configuration</a> mechanism of Caliper. So make sure that you are familiar with the different way of overriding runtime settings before reading on. The examples below only set the different options through the command line. Naturally, any other setting source could be used.</p> <p>The runtime configuration settings corresponding to logging reside under the <code>caliper-logging</code> key hierarchy. See the <code>caliper.logging</code> section of the <a href=https://github.com/hyperledger-caliper/caliper/blob/v0.6.0/packages/caliper-core/lib/config/default.yaml>default configuration file</a> bundled with Caliper for the general structure of the settings.</p> <h2 id=customizing-the-logging-style>Customizing the logging style<a class=headerlink href=#customizing-the-logging-style title="Permanent link">&para;</a></h2> <p>The two main aspects of the logging style are the message structure and the different formats that modify the message appearance if applied. The corresponding attributes are the <code>caliper.logging.template</code> property and the entire <code>caliper.logging.formats</code> property hierarchy, respectively.</p> <p>The <code>caliper.logging.formats</code> hierarchy is special in a sense that every leaf property can be overridden one-by-one, even from the command line or from environment variables. As you will see later, this is not the case for the logging target settings.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>the following style settings apply to every specified logging target!</em></p> </div> <h3 id=setting-the-message-structure>Setting the message structure<a class=headerlink href=#setting-the-message-structure title="Permanent link">&para;</a></h3> <p>The message structure can be easily customized through the <code>caliper.logging.template</code> property. It is a simple string that contains predefined placeholders for some special values. Some placeholders are only available, when a corresponding format is also applied.</p> <p>Let’s start with examining the default structure:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>caliper:
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span>logging:
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span>template:<span class=w> </span><span class=s1>&#39;%timestamp% %level% [%label%] [%module%] %message% (%metadata%)&#39;</span>
</span></code></pre></div> <p>The following placeholders are available at the moment.</p> <table> <thead> <tr> <th>Placeholder</th> <th>Required format</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>%timestamp%</code></td> <td>timestamp</td> <td>Will be replaced with the timestamp of the log message.</td> </tr> <tr> <td><code>%level%</code></td> <td>-</td> <td>Will be replaced with the severity level (e.g., info, warn, error) of the log message.</td> </tr> <tr> <td><code>%label%</code></td> <td>label</td> <td>Will be replaced with the configured label of the process.</td> </tr> <tr> <td><code>%module%</code></td> <td>-</td> <td>Will be replaced with the module name that logged the message.</td> </tr> <tr> <td><code>%message%</code></td> <td>-</td> <td>Will be replaced with the actual message.</td> </tr> <tr> <td><code>%metadata%</code></td> <td>-</td> <td>Will be replaced with the string representation of additional logging arguments.</td> </tr> </tbody> </table> <p>You can override this template by changing the caliper-logging-template setting key, for example, from the command line: <code>--caliper-logging-template="%time%: %message%"</code></p> <div style="border-left: 4px solid #2196F3; padding-left: 10px; margin: 10px 0;"> <strong>Note:</strong> <ol> <li> Do not forget the two enclosing quotes, since the template can contain spaces! </li> <li> This template if applied after every format has been applied! </li> <li> Adding spaces and different brackets this way is fine for simple coloring scenarios (or when coloring is disabled). However, when coloring the entire log message (or just parts that should be surrounded with additional characters), the result looks inconsistent when formatted this way. See the <a href=#tips-tricks>Tips & Tricks</a> section for advanced message formatting scenarios. </li> </ol> </div> <h3 id=applying-formats>Applying formats<a class=headerlink href=#applying-formats title="Permanent link">&para;</a></h3> <p>The logging subsystem relies on winston’s <a href=https://github.com/winstonjs/logform#understanding-formats>format mechanism</a> to further modify the log messages. The corresponding settings are under the <code>caliper.logging.formats</code> property.</p> <p>Each of these formats can be easily disabled by setting its property to <code>false</code>. For example, to disable the <code>colorize</code> format, set its corresponding <code>caliper.logging.formats.colorize</code> property to false, for example, from the command line: <code>--caliper-logging-formats-colorize=false</code></p> <p>Similarly, any sub-property of a format can be easily overridden. For example, changing the <code>caliper.logging.formats.colorize.colors.info</code> property from the command line: <code>--caliper-logging-formats-colorize-colors-info=blue</code></p> <p>The following formats and their options (sub-properties) are supported.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>the different formats are applied in the order they are presented, which is important (see the <a href=#tips-tricks>Tips &amp; Tricks</a> section for the reason).</em></p> </div> <h4 id=timestamp>Timestamp<a class=headerlink href=#timestamp title="Permanent link">&para;</a></h4> <p>Adds the timestamp to the message in the specified format. The format string must conform to the rules of the <a href=https://github.com/taylorhakes/fecha#formatting-tokens>fecha</a> package.</p> <p>For example: <code>--caliper-logging-formats-timestamp="YYYY.MM.DD-HH:mm:ss.SSS"</code></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>the format makes the <code>timestamp</code> attribute available in the message, thus it can be referenced in the message template, or in other formats that can access message attributes.</em></p> </div> <h4 id=label>Label<a class=headerlink href=#label title="Permanent link">&para;</a></h4> <p>Adds a custom label to the message. This is useful for differentiating multiple Caliper instances (or the distributed client instances) after collecting their logs.</p> <p>For example: <code>--caliper-logging-formats-label="caliper-test-1"</code></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>the format makes the <code>label</code> attribute available in the message, thus it can be referenced in the message template, or in other formats that can access message attributes.</em></p> </div> <h4 id=json>JSON<a class=headerlink href=#json title="Permanent link">&para;</a></h4> <p>Outputs the messages as JSON strings. Useful for file-based logs that will be processed automatically by another tool. The format accepts a <code>space</code> sub-property as an options, which corresponds to the <code>space</code> parameter of the <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Syntax>JSON.stringify</a> function.</p> <p>For example: <code>--caliper-logging-formats-json="{space:0}"</code></p> <div style="border-left: 4px solid #2196F3; padding-left: 10px; margin: 10px 0;"> <strong>Note:</strong> <ol> <li> Enabling this format is easier from a configuration file. See the <a href=#tips-tricks>Tips & Tricks</a> section. </li> <li> Setting <code>space</code> to a non-zero number will effectively format the JSON output with indentations on multiple lines. This could “spam” the console a bit (not a problem for log files, unless you care about the extra newlines). </li> <li> If this format is enabled, the rest of the formats won’t be applied, since their purpose is mainly to make console logs more readable. </li> </ol> </div> <h4 id=padding>Padding<a class=headerlink href=#padding title="Permanent link">&para;</a></h4> <p>Makes every log level string the same length, i.e., adds an extra space after <code>"info"</code> and <code>"warn"</code> make them the same length as <code>"error"</code> and <code>"debug"</code>.</p> <p>For example: <code>--caliper-logging-formats-pad=true</code></p> <h4 id=align>Align<a class=headerlink href=#align title="Permanent link">&para;</a></h4> <p>Prepends the message part of the log with a tabulator (<code>"\t"</code>) to align the messages of different logs in the same place.</p> <p>For example: <code>--caliper-logging-formats-align=true</code></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>if the message format contains other information with variable lengths (e.g., the module name), it can cause misaligned messages. So this is just a “best effort” format to make console messages more readable.</em></p> </div> <h4 id=attribute-format>Attribute format<a class=headerlink href=#attribute-format title="Permanent link">&para;</a></h4> <p>Defines string formatting options for the different attributes of a message. A “format string” can be provided for each message attribute that will “reformat” its value. The format string can use the <code>%attribute%</code> placeholder to reference the original value.</p> <p>A format string can be specified for the following message attributes:</p> <ul> <li>timestamp</li> <li>level</li> <li>label</li> <li>module</li> <li>message</li> <li>metadata</li> </ul> <p>For example, to customize the level information of the log (enclose it in the <code>LEVEL[&lt;level&gt;]</code> string):</p> <p><code>--caliper-logging-formats-attributeformat-level="LEVEL[%attribute%]"</code></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>if the attribute is not a string (which can be the case for the “metadata” attribute), then first the attribute value is converted to string, using <code>JSON.stringify</code>, and then it’s inserted into the format string.</em></p> </div> <h4 id=colorize>Colorize<a class=headerlink href=#colorize title="Permanent link">&para;</a></h4> <p>Applies color coding for the different attributes of a message. Enabling/disabling coloring is specified on an attribute basis. The following sub-properties can be set to <code>true/false</code> to enable/disable coloring for the corresponding attribute:</p> <ul> <li>timestamp</li> <li>level</li> <li>label</li> <li>module</li> <li>message</li> <li>metadata</li> <li>all: setting it to true enables coloring for every attribute</li> </ul> <p>For example, to colorize every part of the message: <code>--caliper-logging-formats-colorize-all=true</code></p> <p>Additionally, the format exposes a <code>colors</code> attribute, which contains coloring information for the <code>info</code>, <code>error</code>, <code>warn</code> and <code>debug</code> levels. The value of a level can be set to <a href=https://github.com/Marak/colors.js#colors-and-styles>colors</a> and styles provided by the colors package. To apply multiple styles, separate the values with a space.</p> <p>For example, to really highlight error-level logs: <code>--caliper-logging-formats-colorize-colors-error="white bgRed bold italic"</code></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>the <code>colors</code> package offers some exotic styles which seem tempting at first, but don’t overdo it, for the sake of your eyes. Keep it simple.</em></p> </div> <h2 id=configuring-logging-targets>Configuring logging targets<a class=headerlink href=#configuring-logging-targets title="Permanent link">&para;</a></h2> <p>The source and target(s) of log messages are decoupled, thanks to the <a href=https://github.com/winstonjs/winston/tree/v3.13.1/docs/transports.md>transport mechanism</a> of winston. This means that a log message can be easily logged to multiple places, like the console, or different log files. Moreover, this is completely transparent to the module generating the log message!</p> <p>The different targets are specified under the <code>caliper.logging.targets</code> property. The <code>caliper.logging.targets</code> section takes the following general form:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>caliper:
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span>logging:
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span>targets:
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>      </span>mylogger1:
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>        </span>target:<span class=w> </span>console
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>        </span>enabled:<span class=w> </span><span class=nb>true</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>        </span>options:
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>          </span><span class=c1># console target-specific options</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>      </span>mylogger2:
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>        </span>target:<span class=w> </span>file
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>        </span>enabled:<span class=w> </span><span class=nb>true</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>        </span>options:
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>          </span><span class=c1># file target-specific options</span>
</span></code></pre></div> <p>Each subproperty of <code>caliper.logging.targets</code> is an arbitrary name for the given logging target (e.g., <code>mylogger1</code>, <code>mylogger2</code>, etc.).</p> <p>Each target must specify the following properties:</p> <ul> <li><code>target</code>: the identifier of a supported target. See the table below.</li> <li><code>enabled</code>: indicates whether the target is enabled. Defaults to <code>true</code> if omitted.</li> <li><code>options</code>: this object will be given as-is to the specific winston transport as options. See the table below for the supported options of each transport.</li> </ul> <p>The following <code>target</code> values (i.e., transports) are supported. Click on the links for the official documentation of each transport.</p> <table> <thead> <tr> <th>Target</th> <th>Available options</th> </tr> </thead> <tbody> <tr> <td>console</td> <td><a href=https://github.com/winstonjs/winston/tree/v3.13.1/docs/transports.md#console-transport>Console Transport</a></td> </tr> <tr> <td>file</td> <td><a href=https://github.com/winstonjs/winston/tree/v3.13.1/docs/transports.md#file-transport>File Transport</a></td> </tr> <tr> <td>daily-rotate-file</td> <td><a href=https://github.com/winstonjs/winston-daily-rotate-file#options>Daily Rotating File Transport</a></td> </tr> </tbody> </table> <h3 id=disabling-loggers>Disabling loggers<a class=headerlink href=#disabling-loggers title="Permanent link">&para;</a></h3> <p>Even though the setting keys/properties of the <code>caliper.logging.targets</code> section cannot be overridden one-by-one (like the properties in the <code>caliper.logging.formats</code> section), the <code>enabled</code> property is an exception. To easily disable a logger, set its <code>enabled</code> property to <code>false</code> (using the target’s name in the property hierarchy).</p> <p>For example, to disable the <code>mylogger1</code> target, the following approaches are available:</p> <ul> <li>From the command line: <code>--caliper-logging-targets-mylogger1-enabled=false</code></li> <li>From an environment variable: <code>export CALIPER_LOGGING_TARGETS_MYLOGGER1_ENABLED=false</code></li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>you must use lower-case letters (and/or digits) in your target name for this to work!</em></p> </div> <h3 id=overriding-logger-target-settings>Overriding logger target settings<a class=headerlink href=#overriding-logger-target-settings title="Permanent link">&para;</a></h3> <p>But what if you would like to modify one of the options of a transport? You can use a <a href=../runtime-config/#configuration-files>configuration file</a> for that!</p> <p>For the next example, we will disable the default file logger, modify the logging level of the console target, and also add a new daily rotating file logger. We can do all of this with a single configuration file.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>caliper:
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span>logging:
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span>targets:
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>      </span>console:
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>        </span>options:
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>          </span><span class=c1># we don&#39;t care about info level messages anymore</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>          </span>level:<span class=w> </span>warn
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>      </span>file:
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>        </span><span class=c1># we disable this</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>        </span>enabled:<span class=w> </span><span class=nb>false</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>      </span>rotatingfile:
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>        </span>target:<span class=w> </span>daily-rotate-file
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>        </span><span class=c1># enabled by default</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>        </span>options:
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=w>          </span><span class=c1># we log every message this way</span>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=w>          </span>level:<span class=w> </span>debug
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=w>          </span><span class=c1># start a new log file every hour</span>
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=w>          </span>datePattern:<span class=w> </span><span class=s1>&#39;YYYY-MM-DD-HH&#39;</span>
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=w>          </span><span class=c1># compress old log files after rotating</span>
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a><span class=w>          </span>zippedArchive:<span class=w> </span><span class=nb>true</span>
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a><span class=w>          </span><span class=c1># include the hour-precision date in the file names</span>
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a><span class=w>          </span>filename:<span class=w> </span><span class=s1>&#39;caliper-%DATE%.log&#39;</span>
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a><span class=w>          </span><span class=c1># options for opening the file for writing</span>
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a><span class=w>          </span>options:
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a><span class=w>            </span><span class=c1># append mode</span>
</span><span id=__span-2-26><a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a><span class=w>            </span>flags:<span class=w> </span>a
</span><span id=__span-2-27><a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a><span class=w>            </span><span class=c1># make the file readable/writable by anyone</span>
</span><span id=__span-2-28><a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a><span class=w>            </span>mode:<span class=w> </span><span class=m>0666</span>
</span></code></pre></div> <p>If you save the above content as <code>caliper.yaml</code> in your workspace directory, then Caliper will pick it up automatically.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Some remarks about the above file content:</p> <ol> <li>We only set the properties we wanted to override. The default configuration file will be merged with the above configuration file, the values in the latter taking precedence.</li> <li>The provided options for a transport are not verified by Caliper. It is simple passed to the specific transport. It is your responsibility to configure the transport the right way.</li> <li>We could have disabled the file logger also from the command line, or from an environment variable. The reason we did it from a config file is explained in the <a href=#tips-tricks>Tips &amp; tricks</a> section.</li> </ol> </div> <h2 id=creating-your-own-loggers>Creating your own loggers<a class=headerlink href=#creating-your-own-loggers title="Permanent link">&para;</a></h2> <p>The different modules of Caliper will automatically use the configured targets for logging. Moreover, your user test modules can also create logger instances to log runtime events related to your business logic.</p> <p>To create your own logger instance, use the following API:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>const<span class=w> </span><span class=nv>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span>require<span class=o>(</span><span class=s1>&#39;@hyperledger/caliper-core&#39;</span><span class=o>)</span>.CaliperUtils.getLogger<span class=o>(</span><span class=s1>&#39;my-module&#39;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>//<span class=w> </span>...
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>logger.debug<span class=o>(</span><span class=s1>&#39;My custom debug message&#39;</span>,<span class=w> </span>metadataObject1,<span class=w> </span>metadataObject2<span class=o>)</span><span class=p>;</span>
</span></code></pre></div> <p>Once a logger instance is created, it exposes the usual <code>info</code>, <code>warn</code>, <code>debug</code> and <code>error</code> functions that each take as parameter a log message and optional objects, considered as “metadata”.</p> <p>This “metadata” is especially useful for debug level logs. When you perform an operation based on a complex input parameter/object, you can log the following at the beginning of your function:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=k>function</span><span class=w> </span>complexCalculation<span class=o>(</span>complexInput<span class=o>)</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span>logger.debug<span class=o>(</span><span class=s1>&#39;Starting complex calculation. Input: &#39;</span>,<span class=w> </span>complexInput<span class=o>)</span><span class=p>;</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span>//<span class=w> </span>complex<span class=w> </span>calculation
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=o>}</span>
</span></code></pre></div> <p>The “metadata” will appear at the place of the <code>%metadata%</code> placeholder, as discussed in the message template section.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>pPassing large metadata objects can hurt the performance of logging if done in a loop/hot path. Only use “metadata” logging for debug messages, since the debug level is usually switched off in production code.</em></p> </div> <h2 id=tips-tricks>Tips &amp; tricks<a class=headerlink href=#tips-tricks title="Permanent link">&para;</a></h2> <h3 id=the-format-pipeline>The format pipeline<a class=headerlink href=#the-format-pipeline title="Permanent link">&para;</a></h3> <p>Winston formats are a powerful feature that allow the arbitrary manipulation of log messages. From the user’s perspective, a log message is a simple string displayed on the console, or saved in a file. However, to fully utilize the logging styles described in this documentation, it might help knowing what really happens under the hood.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><em>in the remainder of this section, we’ll refer to log messages as LOG.</em></p> </div> <p>LOG can be considered an item/object, that is generated when issuing a call to <code>logger.info(...)</code> or similar functions. A LOG can have several attributes attached to it. Every LOG has the <code>level</code> and <code>message</code> attributes, containing the severity and the “description” of LOG. Additionally, Caliper automatically adds the <code>module</code> attribute to LOGs of every logger created through the Caliper API, denoting the name of the module who issued the log.</p> <p>Let’s introduce the format pipeline through an example.</p> <h4 id=assumptions>Assumptions<a class=headerlink href=#assumptions title="Permanent link">&para;</a></h4> <p>Let’s assume that the following <code>caliper.logging</code> configuration is used:</p> <p><div class="language-sh highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>template:<span class=w> </span><span class=s1>&#39;%timestamp%%level%%label%%module%%message%%metadata%&#39;</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>formats:
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span>timestamp:<span class=w> </span><span class=s1>&#39;YYYY.MM.DD-HH:mm:ss.SSS&#39;</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span>label:<span class=w> </span>caliper
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span>json:<span class=w> </span><span class=nb>false</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span>pad:<span class=w> </span><span class=nb>true</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span>align:<span class=w> </span><span class=nb>false</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span>attributeformat:
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>        </span>level:<span class=w> </span><span class=s1>&#39; %attribute%&#39;</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>        </span>label:<span class=w> </span><span class=s1>&#39; [%attribute%]&#39;</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>        </span>module:<span class=w> </span><span class=s1>&#39; [%attribute%] &#39;</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>        </span>metadata:<span class=w> </span><span class=s1>&#39; (%attribute%)&#39;</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>    </span>colorize:
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>        </span>all:<span class=w> </span><span class=nb>true</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>        </span>colors:
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>            </span>info:<span class=w> </span>green
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>            </span>error:<span class=w> </span>red
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>            </span>warn:<span class=w> </span>yellow
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>            </span>debug:<span class=w> </span>grey
</span></code></pre></div> This means that the following formats will be applied to every LOG:</p> <ul> <li>module (automatically added by Caliper)</li> <li>timestamp</li> <li>label</li> <li>padding</li> <li>attribute formats</li> <li>colorizing</li> <li>template substitution</li> </ul> <p>Furthermore, let’s assume that the following code initiates the LOG:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>const<span class=w> </span><span class=nv>logger</span><span class=w> </span><span class=o>=</span><span class=w> </span>require<span class=o>(</span><span class=s1>&#39;@hyperledger/caliper-core&#39;</span><span class=o>)</span>.CaliperUtils.getLogger<span class=o>(</span><span class=s1>&#39;my-module&#39;</span><span class=o>)</span><span class=p>;</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>//<span class=w> </span>...
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>logger.info<span class=o>(</span><span class=s1>&#39;Doing operation X with:&#39;</span>,<span class=w> </span><span class=s1>&#39;someSetting&#39;</span>,<span class=w> </span><span class=s1>&#39;anotherSetting&#39;</span><span class=o>)</span><span class=p>;</span>
</span></code></pre></div> <h4 id=the-life-of-a-log>The life of a LOG<a class=headerlink href=#the-life-of-a-log title="Permanent link">&para;</a></h4> <p>The <code>logger.info</code> call generates the initial LOG with the following attributes:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>level:<span class=w> </span><span class=s1>&#39;info&#39;</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>message:<span class=w> </span><span class=s1>&#39;Doing operation X with:&#39;</span>
</span></code></pre></div> <p>Before LOG enters the format pipeline, Caliper also adds the module name, and collects the additional parameters as metadata. Now LOG has the following attributes:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>level:<span class=w> </span><span class=s1>&#39;info&#39;</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>message:<span class=w> </span><span class=s1>&#39;Doing operation X with:&#39;</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>module:<span class=w> </span><span class=s1>&#39;my-module&#39;</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>metadata:<span class=w> </span><span class=o>[</span><span class=s1>&#39;someSetting&#39;</span>,<span class=w> </span><span class=s1>&#39;anotherSetting&#39;</span><span class=o>]</span>
</span></code></pre></div> <p>This is the initial LOG entity that enters the format pipeline. Every enabled format is “just” a transformation on the attributes of LOG. A format can manipulate the value of an existing attribute or/and add/remove arbitrary attributes.</p> <p>The first step of the pipeline is the timestamp format. This adds the <code>timestamp</code> attribute containing the current time, in the specified format. After this step, LOG looks like this:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>level:<span class=w> </span><span class=s1>&#39;info&#39;</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>message:<span class=w> </span><span class=s1>&#39;Doing operation X with:&#39;</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>module:<span class=w> </span><span class=s1>&#39;my-module&#39;</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>metadata:<span class=w> </span><span class=o>[</span><span class=s1>&#39;someSetting&#39;</span>,<span class=w> </span><span class=s1>&#39;anotherSetting&#39;</span><span class=o>]</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>timestamp:<span class=w> </span><span class=s1>&#39;2019.10.07-12:45:47.962&#39;</span>
</span></code></pre></div> <p>The next step if the label format, which adds the <code>label</code> attribute with the specified value (<code>caliper</code>, in this case):</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>level:<span class=w> </span><span class=s1>&#39;info&#39;</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>message:<span class=w> </span><span class=s1>&#39;Doing operation X with:&#39;</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>module:<span class=w> </span><span class=s1>&#39;my-module&#39;</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>metadata:<span class=w> </span><span class=o>[</span><span class=s1>&#39;someSetting&#39;</span>,<span class=w> </span><span class=s1>&#39;anotherSetting&#39;</span><span class=o>]</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>timestamp:<span class=w> </span><span class=s1>&#39;2019.10.07-12:45:47.962&#39;</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>label:<span class=w> </span><span class=s1>&#39;caliper&#39;</span>
</span></code></pre></div> <p>The next step is the padding format, which ensure that every logging level string has the same length. This means, that an extra space is appended at the end of the <code>level</code> attribute:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>level:<span class=w> </span><span class=s1>&#39;info &#39;</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>message:<span class=w> </span><span class=s1>&#39;Doing operation X with:&#39;</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>module:<span class=w> </span><span class=s1>&#39;my-module&#39;</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>metadata:<span class=w> </span><span class=o>[</span><span class=s1>&#39;someSetting&#39;</span>,<span class=w> </span><span class=s1>&#39;anotherSetting&#39;</span><span class=o>]</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>timestamp:<span class=w> </span><span class=s1>&#39;2019.10.07-12:45:47.962&#39;</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>label:<span class=w> </span><span class=s1>&#39;caliper&#39;</span>
</span></code></pre></div> <p>The next step is the attribute formatter. This formatter is configured to modify multiple attributes of LOG, based on a string template:</p> <ul> <li>level: add a space before it</li> <li>label: enclose in <code>[]</code> and add a space before it</li> <li>module: enclose in <code>[]</code> and add a space before and after it</li> <li>metadata: enclose in <code>()</code> and add a space before it</li> </ul> <p>After these transformation, LOG looks like the following:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>level:<span class=w> </span><span class=s1>&#39; info &#39;</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>message:<span class=w> </span><span class=s1>&#39;Doing operation X with:&#39;</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>module:<span class=w> </span><span class=s1>&#39; [my-module] &#39;</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>metadata:<span class=w> </span><span class=s1>&#39; ([&quot;someSetting&quot;, &quot;anotherSetting&quot;])&#39;</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>timestamp:<span class=w> </span><span class=s1>&#39;2019.10.07-12:45:47.962&#39;</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>label:<span class=w> </span><span class=s1>&#39; [caliper]&#39;</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>some remarks: 1. <code>metadata</code> was an Array, not a string, so it was stringified before the formatting was applied. 2. <code>message</code> and <code>timestamp</code> is unchanged.</p> </div> <p>The next step is the colorizing format, which adds certain color/style codes to the configured values. Since <code>all</code> is set true, and the <code>level</code> of LOG is info, every attribute is surrounded with the color code for green (denoted by <code>&lt;green&gt;</code> for sake of readability):</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>level:<span class=w> </span><span class=s1>&#39;&lt;green&gt; info &lt;green&gt;&#39;</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>message:<span class=w> </span><span class=s1>&#39;&lt;green&gt;Doing operation X with:&lt;green&gt;&#39;</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>module:<span class=w> </span><span class=s1>&#39;&lt;green&gt; [my-module] &lt;green&gt;&#39;</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>metadata:<span class=w> </span><span class=s1>&#39;&lt;green&gt; ([&quot;someSetting&quot;, &quot;anotherSetting&quot;])&lt;green&gt;&#39;</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>timestamp:<span class=w> </span><span class=s1>&#39;&lt;green&gt;2019.10.07-12:45:47.962&lt;green&gt;&#39;</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>label:<span class=w> </span><span class=s1>&#39;&lt;green&gt; [caliper]&lt;green&gt;&#39;</span>
</span></code></pre></div> <p>The last step in the pipeline (since the JSON format is disabled) is substituting the attributes into the logging template, to create the final message, that will appear in the console and in the file. The result is the concatenation of LOG’s attributes in the following order:</p> <ol> <li>timestamp</li> <li>level</li> <li>label</li> <li>module</li> <li>message</li> <li>metadata</li> </ol> <p>Omitting the color code for the sake of readability, this results in:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=m>2019</span>.10.07-12:45:47.962<span class=w> </span>info<span class=w>  </span><span class=o>[</span>caliper<span class=o>]</span><span class=w> </span><span class=o>[</span>my-module<span class=o>]</span><span class=w> </span>Doing<span class=w> </span>operation<span class=w> </span>X<span class=w> </span>with:<span class=w> </span><span class=o>([</span><span class=s2>&quot;someSetting&quot;</span>,<span class=w> </span><span class=s2>&quot;anotherSetting&quot;</span><span class=o>])</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>try adding other characters to the template string. And then be surprised that they are not colorized with the rest of the line. Actually, this is not surprising at all. The template string is “evaluated” after the colorizing format. Since these extra characters are not part of any attributes of LOG, they won’t be colorized.</p> </div> <h3 id=use-a-configuration-file>Use a configuration file<a class=headerlink href=#use-a-configuration-file title="Permanent link">&para;</a></h3> <p>Logging settings are usually determined by your log analysis requirements. This means that once you settle on some logging style and targets, those settings will rarely change.</p> <p>To this end, the ability to override the logging style settings from the command line or from environment variables is really just a convenience feature. Once you found your ideal settings, it’s worth to record them in a configuration file.</p> <p>The easiest way to do that is with a project-level configuration file. If you name the following file <code>caliper.yaml</code> and place it in your workspace root, then Caliper will automatically apply the settings.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>there are other ways to load a configuration file, as discussed in the <a href=../runtime-config/#configuration-files>runtime configuration page</a>.</p> </div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>caliper:
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>  </span>logging:
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=c1># no need for timestamp and label</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span>template:<span class=w> </span><span class=s1>&#39;%level% [%module%]: %message% %meta%&#39;</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span>formats:
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>      </span><span class=c1># color codes look ugly in log files</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>      </span>colorize:<span class=w> </span><span class=nb>false</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>      </span><span class=c1># don&#39;t need these, since won&#39;t appear in the template</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>      </span>label:<span class=w> </span><span class=nb>false</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=w>      </span>timestamp:<span class=w> </span><span class=nb>false</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>    </span>targets:
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=w>      </span>file:
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a><span class=w>        </span>options:
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=w>          </span><span class=c1># bump the log level from debug to warn, only log the critical stuff in this file</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a><span class=w>          </span>level:<span class=w> </span>warn
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a><span class=w>          </span>filename:<span class=w> </span><span class=s1>&#39;critical.log&#39;</span>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a><span class=w>      </span>rotatingfile:
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=w>        </span>target:<span class=w> </span>daily-rotate-file
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a><span class=w>        </span>enabled:<span class=w> </span><span class=nb>true</span>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a><span class=w>        </span>options:
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a><span class=w>          </span>level:<span class=w> </span>debug
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a><span class=w>          </span>datePattern:<span class=w> </span><span class=s1>&#39;YYYY-MM-DD-HH&#39;</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a><span class=w>          </span>zippedArchive:<span class=w> </span><span class=nb>true</span>
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24 href=#__codelineno-15-24></a><span class=w>          </span>filename:<span class=w> </span><span class=s1>&#39;debug-%DATE%.log&#39;</span>
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25 href=#__codelineno-15-25></a><span class=w>          </span>options:
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26 href=#__codelineno-15-26></a><span class=w>            </span>flags:<span class=w> </span>a
</span><span id=__span-15-27><a id=__codelineno-15-27 name=__codelineno-15-27 href=#__codelineno-15-27></a><span class=w>            </span>mode:<span class=w> </span><span class=m>0666</span>
</span></code></pre></div> <h2 id=license>License<a class=headerlink href=#license title="Permanent link">&para;</a></h2> <p>The Caliper codebase is released under the <a href=../../getting-started/license/ >Apache 2.0 license</a>. Any documentation developed by the Caliper Project is licensed under the Creative Commons Attribution 4.0 International License. You may obtain a copy of the license, titled CC-BY-4.0, at <a href=http://creativecommons.org/licenses/by/4.0/ >http://creativecommons.org/licenses/by/4.0/</a>.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../runtime-config/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Runtime Configuration"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Runtime Configuration </div> </div> </a> <a href=../benchmark-generators/ class="md-footer__link md-footer__link--next" aria-label="Next: Benchmark Generators"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Benchmark Generators </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.fe8b6f2b.min.js></script> </body> </html>